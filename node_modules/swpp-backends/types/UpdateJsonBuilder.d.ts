import { FileFetchModeLevel } from './SwppConfig';
import { AnalyzeResult } from './VersionAnalyzer';
/**
 * 构建新的 update json
 *
 * + **执行该函数前必须调用过 [loadRules]**
 * + **调用该函数前必须调用过 [loadCacheJson]**
 * + **执行该函数前必须调用过 [buildVersionJson]**
 * + **执行该函数前必须调用过 [calcEjectValues]**
 *
 * @param root 网站根路径（包括网络协议）
 * @param dif 网站文件变化
 */
export declare function buildUpdateJson(root: string, dif?: AnalyzeResult): UpdateJson;
/** 提交修改 */
export declare function submitChange(...change: ChangeExpression[]): void;
/**
 * 加载版本文件
 *
 * + **调用该函数前必须调用过 [loadRules]**
 */
export declare function loadUpdateJson(url: string, level?: FileFetchModeLevel): Promise<UpdateJson | null>;
/**
 * 获取 URL 的缩写形式
 *
 * + **执行该函数前必须调用过 [loadRules]**
 * + **调用该函数前必须调用过 [loadCacheJson]**
 * + **执行该函数前必须调用过 [buildVersionJson]**
 * + **执行该函数前必须调用过 [calcEjectValues]**
 */
export declare function getShorthand(url: string, offset?: number): string;
export interface UpdateJson {
    global: number;
    info: UpdateVersionInfo[];
}
export interface UpdateVersionInfo {
    version: number;
    change?: ChangeExpression[];
}
export interface ChangeExpression {
    flag: FlagStr;
    value?: string | string[];
}
export type FlagStr = 'html' | 'end' | 'begin' | 'str' | 'reg';
